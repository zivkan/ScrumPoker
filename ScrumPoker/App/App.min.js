(function(){"use strict";var n=angular.module("scrumPokerApp",["ngRoute","ui.bootstrap","scrumPokerControllers"]);n.config(["$routeProvider",function(n){n.when("/",{templateUrl:"partials/lobby.html",controller:"lobby"}).when("/room/:roomId",{templateUrl:"partials/room.html",controller:"room"}).otherwise({redirectTo:"/"})}])})(),function(){"use strict";angular.module("scrumPokerControllers",[])}(),function(){"use strict";angular.module("scrumPokerControllers").controller("connection",["$scope","$modalInstance","PokerServer",function(n,t,i){n.PokerServer=i;var r=function(n){return n===$.connection.connectionState.connecting?"connecting":n===$.connection.connectionState.reconnecting?"reconnecting":n===$.connection.connectionState.disconnected?"disconnected":n===$.connection.connectionState.connected?"connected":"unknown state"};n.connectionState=r($.connection.hub.state);$.connection.hub.stateChanged(function(t){n.connectionState=r(t.newState);n.$apply()})}])}(),function(){"use strict";angular.module("scrumPokerControllers").controller("lobby",["$scope","PokerServer","$location",function(n,t,i){n.rooms=null;t.Reconnect().then(function(){t.getRooms().then(function(t){n.rooms=t})});n.CreateRoom=function(n){t.CreateRoom(n).then(function(n){n!==null&&i.path("/room/"+n)})};t.$on("roomAdded",function(t,i){n.$apply(function(){n.rooms!==null&&n.rooms.push(i)})});t.$on("roomDeleted",function(t,i){for(var u=function(t){n.rooms.splice(t,1)},r=0;r<n.rooms.length;r++)if(n.rooms[r].Id===i){n.$apply(u(r));break}})}])}(),function(){"use strict";angular.module("scrumPokerApp").factory("PokerServer",["$rootScope","$location","$modal","$q",function(n,t,i,r){var u=n.$new(),f,e;return u.Reconnect=function(){return r.when($.connection.hub.start())},f=$.connection.lobbyHub,u.getRooms=function(){return r.when(f.server.getRooms())},f.client.roomAdded=function(n){u.$emit("roomAdded",n)},f.client.roomDeleted=function(n){u.$emit("roomDeleted",n)},u.currentRoom=null,e=$.connection.roomHub,e.client.roomUpdate=function(t){u.currentRoom!==null&&(u.currentRoom.Voters=t.Participants,n.$apply())},u.CreateRoom=function(n){return r.when(f.server.createRoom(n))},u.JoinRoom=function(n){return r.when(e.server.joinRoom(n))},u.LeaveRoom=function(){return r.when(e.server.leaveRoom())},u.Bet=function(n){e.server.bet(n)},u.modalInstance=null,$.connection.hub.stateChanged(function(n){n.newState!==$.connection.connectionState.connected?u.modalInstance===null&&(u.modalInstance=i.open({templateUrl:"partials/connection.html",controller:"connection",backdrop:"static"})):u.modalInstance!==null&&(u.modalInstance.dismiss(),u.modalInstance=null)}),u}])}(),function(){"use strict";angular.module("scrumPokerControllers").controller("room",["$scope","PokerServer","$routeParams",function(n,t,i){n.server=t;n.roomId=i.roomId;n.allowedBets=[0,1,2,3,5,8,13,21,34,55,89];t.Reconnect().then(function(){t.JoinRoom(n.roomId).then(function(n){t.currentRoom=n})});n.$on("$destroy",function(){t.LeaveRoom()});n.Bet=function(n){n==="-"&&(n=null);t.Bet(n)}}])}();
//# sourceMappingURL=App.min.js.map
