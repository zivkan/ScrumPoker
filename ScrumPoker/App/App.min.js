(function(){"use strict";var n=angular.module("scrumPokerApp",["ngRoute","ui.bootstrap","scrumPokerControllers"]);n.config(["$routeProvider",function(n){n.when("/",{templateUrl:"partials/lobby.html",controller:"lobby"}).when("/room/:roomId",{templateUrl:"partials/room.html",controller:"room"}).otherwise({redirectTo:"/"})}])})(),function(){"use strict";angular.module("scrumPokerControllers",[])}(),function(){"use strict";angular.module("scrumPokerControllers").controller("connection",["$scope","$modalInstance","PokerServer",function(n,t,i){n.PokerServer=i;var r=function(n){return n==$.connection.connectionState.connecting?"connecting":n==$.connection.connectionState.reconnecting?"reconnecting":n==$.connection.connectionState.disconnected?"disconnected":n==$.connection.connectionState.connected?"connected":"unknown state"};n.connectionState=r($.connection.hub.state);$.connection.hub.stateChanged(function(t){n.connectionState=r(t.newState);n.$apply()})}])}(),function(){"use strict";angular.module("scrumPokerControllers").controller("lobby",["$scope","PokerServer",function(n,t){n.server=t}])}(),function(){"use strict";angular.module("scrumPokerApp").factory("PokerServer",["$rootScope","$location","$modal",function(n,t,i){var r=this,f,u;return r.rooms=null,r.currentRoom=null,f=$.connection.lobbyHub,f.client.roomAdded=function(t){r.rooms.push(t);n.$apply()},f.client.roomDeleted=function(t){var u=function(n){for(var t=0;t<r.rooms.length;t++)if(r.rooms[t].Id===n)return t;return-1},i=u(t);i!==-1&&(r.rooms.splice(i,1),n.$apply())},u=$.connection.roomHub,u.client.roomUpdate=function(t){r.currentRoom!==null&&(r.currentRoom.participants=t,n.$apply())},r.modalInstance=null,$.connection.hub.stateChanged(function(n){n.newState!==$.connection.connectionState.connected?r.modalInstance===null&&(r.modalInstance=i.open({templateUrl:"partials/connection.html",controller:"connection",backdrop:"static"})):r.modalInstance!==null&&(r.modalInstance.dismiss(),r.modalInstance=null)}),r.Reconnect=function(){$.connection.hub.start().done(function(){f.server.getRooms().done(function(t){r.rooms=t;n.$apply()});r.currentRoom!==null&&u.server.joinRoom(r.currentRoom.id,r.currentRoom.username)})},r.Reconnect(),r.CreateRoom=function(i,u){f.server.createRoom(i,u).done(function(u){u.RoomId!==null&&(r.currentRoom={id:u.RoomId,name:i},r.currentRoom.participants=u.participants,t.path("/room/"+u.RoomId),n.$apply())})},r.JoinRoom=function(i,f){u.server.joinRoom(i,f).done(function(u){r.currentRoom={id:i,username:f,name:"later"};r.currentRoom.participants=u;t.$$path.indexOf("/room/")===-1&&t.path("/room/"+i);n.$apply()})},r.Bet=function(n){u.server.bet(n)},n.$on("$locationChangeStart",function(n,t,i){i.indexOf("/room/")!==-1&&r.currentRoom!==null&&(u.server.leaveRoom(),r.currentRoom=null)}),r}])}(),function(){"use strict";angular.module("scrumPokerControllers").controller("room",["$scope","PokerServer","$routeParams",function(n,t,i){n.server=t;n.roomId=i.roomId;n.$watch("myBet",function(t){t!=null&&(t==="-"&&(t=null),n.server.Bet(t))});n.allowedBets=[0,1,2,3,5,8,13,21,34,55,89]}])}();
/*
//# sourceMappingURL=App.min.js.map
*/